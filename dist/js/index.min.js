"use strict";var completeData=null,widthMap=880,heightMap=520,canvas=d3.select(".map").append("canvas").attr("id","canvas").style("position","absolute").style("background-image","url(./Carte_Paris.svg)").style("background-size","contain").style("background-repeat","no-repeat").attr("width",widthMap).attr("height",heightMap).attr("x",0).attr("y",0),svgMap=d3.select(".map").append("svg").style("position","absolute").attr("width",widthMap).attr("height",heightMap),g=svgMap.append("g");const projection=d3.geoConicConformal().center([2.357,48.8563]).scale(25e4).translate([widthMap/2,heightMap/2]).angle([-1.2]);var path=d3.geoPath().projection(projection),heat=simpleheat("canvas");let heatarray=[],selectedArrondissements=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020"];var margin={top:20,right:20,bottom:20,left:20},width=600-margin.left-margin.right,height=300-margin.top-margin.bottom,hauteurBarre=10,svg=d3.select(".smallCharts").append("svg").attr("width",610).attr("height",400).style("float","left").style("margin-top","10px").style("margin-left","22.5px").style("margin-bottom","10px").append("g").attr("transform","translate("+3*margin.left+","+(3*margin.top+10)+")"),x=d3.scaleLinear().range([0,500]),y=d3.scaleBand().range([0,275]).padding(.1),xAxis=d3.axisBottom(x),yAxis=d3.axisLeft(y),gBarChart=svg.append("g").attr("transform","translate("+margin.left+","+margin.top+")");gBarChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(250,290)").text("Nombre de connexions"),gBarChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(-55,130)rotate(-90)").text("Heures (format 24h)"),gBarChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","20px").attr("transform","translate(205,-50)").text("Nombre de connexions par heure");var tabHours=[24];let selectedHours=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23];var svgLineChart=d3.select(".smallCharts").append("svg").attr("width",610).attr("height",400).style("float","left").style("margin-top","10px").style("margin-left","22.5px").style("margin-bottom","10px").append("g").attr("transform","translate("+3*margin.left+","+(3*margin.top+10)+")"),xScale=d3.scaleLinear().domain([0,24]).range([0,500]),yScale=d3.scaleLinear().domain([0,3e3]).range([275,0]),line=d3.line().x(function(t,e){return xScale(e)}).y(function(t){return yScale(t.download/1e9)}).curve(d3.curveMonotoneX),line_bis=d3.line().x(function(t,e){return xScale(e)}).y(function(t){return yScale(t.upload/1e9)}).curve(d3.curveMonotoneX),gLineChart=svgLineChart.append("g").attr("transform","translate("+margin.left+","+margin.top+")");gLineChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(250,290)").text("Heures (format 24h)"),gLineChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(-55,130)rotate(-90)").text("Données (en GigaOctets)"),gLineChart.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","20px").attr("transform","translate(205,-50)").text("Données (en GigaOctets) par heure (format 24h)");var svgBarChartArrondissement=d3.select(".smallCharts").append("svg").attr("width",610).attr("height",400).style("float","left").style("margin-top","10px").style("margin-right","22.5px").style("margin-left","22.5px").style("margin-bottom","10px").append("g").attr("transform","translate(0,"+margin.top+")"),xArrondissement=d3.scaleBand().rangeRound([0,500]).padding(.1),yArrondissement=d3.scaleLinear().rangeRound([height,0]),xArrondissementAxis=d3.axisBottom(xArrondissement),yArrondissementAxis=d3.axisLeft(yArrondissement),gArrondissement=svgBarChartArrondissement.append("g").attr("transform","translate("+3*margin.left+","+(3*margin.top+5)+")");gArrondissement.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(250,295)").text("Arrondissements Parisiens"),gArrondissement.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","13px").attr("transform","translate(-35,130)rotate(-90)").text("Données (en GigaOctets)"),gArrondissement.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","20px").attr("transform","translate(205,-50)").text("Données (en GigaOctets) par arrondissement");var i,tabCp=[20];for(i=0;i<24;i++)tabHours[i]={hours:i,frequency:0,download:0,upload:0};for(i=0;i<21;i++)tabCp[i]={codePostal:i,donnees:0,upload:0,download:0};var widthPie=350,heightPie=350,marginPie=40,radiusPie=Math.min(widthPie,heightPie)/2-marginPie,svgPie=d3.select("#pieChart").append("svg").attr("width",widthPie).attr("height",heightPie).append("g").attr("transform","translate("+widthPie/2+","+heightPie/2+")");function barChart(){var t=d3.max(tabHours,function(t){return t.frequency});y.domain(tabHours.map(function(t){return t.hours}).reverse()),x.domain([0,t]),svg.append("g").attr("class","axis axis--y").attr("transform","translate(0,275)").style("font-size","12px").call(xAxis);var e=svg.append("g").attr("class","axis axis--y").style("font-size","12px").call(yAxis);svg.selectAll(".bar").data(tabHours.reverse()).enter().append("rect").attr("class","bar").attr("x",0).attr("height",11).style("opacity",.7).attr("y",function(t,e){return y(t.hours)-5.5}).on("click",function(t){selectedHours.includes(t.hours)?(selectedHours.splice(selectedHours.indexOf(t.hours),1),d3.select(this).transition().duration(500).style("fill","#808080"),svgLineChart.selectAll(".dot").filter((e,r)=>e.hours==t.hours).transition().duration(500).style("fill","#808080"),svgLineChart.selectAll(".dot_bis").filter((e,r)=>e.hours==t.hours).transition().duration(500).style("fill","#808080"),svgPie.selectAll(".piePart").filter(e=>{return parseInt(e.data.key)==t.hours}).transition().duration(500).style("fill","#808080")):(selectedHours.push(parseInt(t.hours,10)),d3.select(this).transition().duration(500).style("fill","blue"),svgLineChart.selectAll(".dot").filter((e,r)=>e.hours==t.hours).transition().duration(500).style("fill","#ffab00"),svgLineChart.selectAll(".dot_bis").filter((e,r)=>e.hours==t.hours).transition().duration(500).style("fill","#000000"),svgPie.selectAll(".piePart").filter(e=>{return parseInt(e.data.key)==t.hours}).transition().duration(500).style("fill","blue")),printListHours(),indexHostpots(),majBarChartArr()}).attr("width",0).transition().duration(300).delay(function(t,e){return 50*e}).attr("width",function(t){return x(t.frequency)}),Object.assign(svg,{update(t){y.domain(tabHours.sort(t).map(t=>parseInt(t.hours)).reverse()),svg.transition().duration(500),svg.selectAll(".bar").data(tabHours.reverse(),t=>t.hours).order().transition().duration(500).attr("y",t=>y(t.hours)-5.5),e.call(yAxis)}})}function lineChart(){var t=d3.max(tabHours,function(t){return t.upload}),e=d3.max(tabHours,function(t){return t.download});t>=e?yScale.domain([0,t/1e9]):yScale.domain([0,e/1e9]),svgLineChart.append("g").attr("class","axis axis--y").attr("transform","translate(0,275)").style("font-size","12px").call(d3.axisBottom(xScale)),svgLineChart.append("g").attr("class","axis axis--y").style("font-size","12px").call(d3.axisLeft(yScale));var r=d3.line().x(function(t,e){return xScale(e)}).y(function(t){return yScale(0)}).curve(d3.curveMonotoneX);svgLineChart.append("path").datum(tabHours).attr("class","line").attr("d",r).merge(svgLineChart.selectAll(".line")).transition().duration(1500).attr("d",line);var a=d3.line().x(function(t,e){return xScale(e)}).y(function(t){return yScale(0)}).curve(d3.curveMonotoneX);svgLineChart.append("path").datum(tabHours).attr("class","line_bis").attr("d",a).merge(svgLineChart.selectAll(".line_bis")).transition().duration(1500).attr("d",line_bis),svgLineChart.selectAll(".dot").data(tabHours).enter().append("circle").attr("class","dot").attr("cx",function(t,e){return xScale(e)}).attr("cy",275).attr("r",0).on("click",function(t){selectedHours.includes(t.hours)?(selectedHours.splice(selectedHours.indexOf(t.hours),1),d3.select(this).transition().duration(500).style("fill","#808080"),svg.selectAll(".bar").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#808080"),svgLineChart.selectAll(".dot_bis").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#808080")):(selectedHours.push(parseInt(t.hours,10)),d3.select(this).transition().duration(500).style("fill","#ffab00"),svg.selectAll(".bar").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","blue"),svgLineChart.selectAll(".dot_bis").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#000000")),printListHours(),indexHostpots(),majBarChartArr()}).transition().duration(1500).attr("cy",function(t){return yScale(t.download/1e9)}).attr("r",7),svgLineChart.selectAll(".dot_bis").data(tabHours).enter().append("circle").attr("class","dot_bis").attr("cx",function(t,e){return xScale(e)}).attr("cy",275).attr("r",0).on("click",function(t){selectedHours.includes(t.hours)?(selectedHours.splice(selectedHours.indexOf(t.hours),1),d3.select(this).transition().duration(500).style("fill","#808080"),svg.selectAll(".bar").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#808080"),svgLineChart.selectAll(".dot").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#808080")):(selectedHours.push(parseInt(t.hours,10)),d3.select(this).transition().duration(500).style("fill","black"),svg.selectAll(".bar").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","blue"),svgLineChart.selectAll(".dot").filter(e=>e.hours==t.hours).transition().duration(500).style("fill","#ffab00")),printListHours(),indexHostpots(),majBarChartArr()}).transition().duration(1500).attr("cy",function(t){return yScale(t.upload/1e9)}).attr("r",7)}function barChartArrondissement(){const t=d3.max(tabCp,function(t){return t.upload+t.download});xArrondissement.domain(tabCp.map(function(t){return t.codePostal})),yArrondissement.domain([0,t/1e9]);var e=gArrondissement.append("g").attr("class","axis axis--y").attr("transform","translate(0,"+height+")").style("font-size","12px").call(xArrondissementAxis);gArrondissement.append("g").attr("class","axis axis--y").style("font-size","12px").call(yArrondissementAxis);gArrondissement.selectAll(".bar").data(tabCp).enter().append("rect").attr("class","bar").attr("id","databar").style("fill","#ffab00").attr("x",function(t){return xArrondissement(t.codePostal)}).attr("y",function(t){return yArrondissement(t.download/1e9)}).attr("isClicked","false").on("click",function(t){let e=t.codePostal;e=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal,selectedArrondissements.includes(e)?(selectedArrondissements.splice(selectedArrondissements.indexOf(e),1),d3.select(this).attr("isClicked","false").transition().duration(500).style("fill","#808080"),gArrondissement.selectAll(".bar_bis").filter(function(t){let r=t.codePostal;return(r=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).attr("isClicked","false").transition().duration(500).style("fill","#808080"),svgMap.selectAll("path").filter(function(t){return"750"+t.properties.n_sq_ar.toString().split("7500000")[1]==e}).transition().duration(500).style("fill","#B0E0E6")):(selectedArrondissements.push(e),d3.select(this).attr("isClicked","true").transition().duration(500).style("fill","#ffab00"),gArrondissement.selectAll(".bar_bis").filter(function(t){let r=t.codePostal;return(r=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).attr("isClicked","false").transition().duration(500).style("fill","#000000"),svgMap.selectAll("path").filter(function(t){return"750"+t.properties.n_sq_ar.toString().split("7500000")[1]==e}).transition().duration(500).style("fill","#1E90FF")),printList(),indexHostpots(),majBarLineChart()}).attr("width",xArrondissement.bandwidth()).attr("y",()=>height).attr("height",0).transition().duration(300).delay(function(t,e){return 50*e}).attr("y",t=>yArrondissement(t.download/1e9)).attr("height",t=>height-yArrondissement(t.download/1e9)),gArrondissement.selectAll(".bar_bis").data(tabCp).enter().append("rect").attr("class","bar_bis").attr("id","databar").style("fill","#000000").attr("x",function(t){return xArrondissement(t.codePostal)}).attr("y",function(t){return yArrondissement(t.download/1e9)}).attr("isClicked","false").on("click",function(t){let e=t.codePostal;e=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal,selectedArrondissements.includes(e)?(selectedArrondissements.splice(selectedArrondissements.indexOf(e),1),d3.select(this).attr("isClicked","false").transition().duration(500).style("fill","#808080"),gArrondissement.selectAll(".bar").filter(function(t){let r=t.codePostal;return(r=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).attr("isClicked","false").transition().duration(500).style("fill","#808080"),svgMap.selectAll("path").filter(function(t){return"750"+t.properties.n_sq_ar.toString().split("7500000")[1]==e}).transition().duration(500).style("fill","#B0E0E6")):(selectedArrondissements.push(e),d3.select(this).attr("isClicked","true").transition().duration(500).style("fill","#000000"),gArrondissement.selectAll(".bar").filter(function(t){let r=t.codePostal;return(r=1==t.codePostal.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).attr("isClicked","false").transition().duration(500).style("fill","#ffab00"),svgMap.selectAll("path").filter(function(t){return"750"+t.properties.n_sq_ar.toString().split("7500000")[1]==e}).transition().duration(500).style("fill","#1E90FF")),printList(),indexHostpots(),majBarLineChart()}).attr("width",xArrondissement.bandwidth()).attr("y",()=>height).attr("height",0).transition().duration(300).delay(function(t,e){return 50*e}).attr("y",t=>yArrondissement((t.download+t.upload)/1e9)).attr("height",t=>height-yArrondissement(t.upload/1e9)),Object.assign(svgBarChartArrondissement,{update(t){xArrondissement.domain(tabCp.sort(t).map(t=>t.codePostal)),svgBarChartArrondissement.transition().duration(500),gArrondissement.selectAll(".bar").data(tabCp,t=>t.codePostal).order().transition().duration(500).attr("x",t=>xArrondissement(t.codePostal)),gArrondissement.selectAll(".bar_bis").data(tabCp,t=>t.codePostal).order().transition().duration(500).attr("x",t=>xArrondissement(t.codePostal)),e.call(xArrondissementAxis)}})}function indexHostpots(){d3.csv("indexHotspots.csv").then(function(t){heatarray=[],t.forEach(function(t){""!=t.CodeSite&&selectedArrondissements.includes(t.CodePostal)&&heatarray.push([t.CodeSite,projection([t.Longitude,t.Latitude])[0],projection([t.Longitude,t.Latitude])[1],0])}),svgMap.selectAll("circle").data(t).enter().append("circle").attr("cx",function(t){return projection([t.Longitude,t.Latitude])[0]}).attr("cy",function(t){return projection([t.Longitude,t.Latitude])[1]}).attr("r","3px").attr("fill","red").on("click",function(t){alert(t.NomSite+"\n"+t.Adresse+"\n"+t.CodePostal+"\n"+t.NbBornes+" bornes sur ce site.")}).on("mousemove",function(t){d3.select(this).attr("r","8px")}).on("mouseout",function(t){d3.select(this).attr("r","3px")})}).then(()=>{dataParisHotspotslight()})}function dataParisHotspotslight(){completeData.forEach(function(t){let e=d3.timeParse("%Y-%m-%dT%H:%M:%S%Z")(t.DateDebut).getHours();selectedHours.includes(e)&&heatarray.forEach(function(e,r){heatarray[r].includes(t.CodeSite)&&(heatarray[r][3]+=1)})}),heatArray()}function heatArray(){heatarray.forEach((t,e)=>{heatarray[e]=heatarray[e].slice(1)});var t=d3.max(heatarray,function(t){return parseInt(t,10)});heat.data(heatarray).max(t/10).radius(15,15).draw()}function geoJson(t){svgMap.selectAll("path").data(t.features).enter().append("path").attr("d",path).attr("isClicked","true").style("fill","#1E90FF").style("stroke","#D9EDF7").style("opacity","0.2").on("click",function(t){let e="750"+t.properties.n_sq_ar.toString().split("7500000")[1];selectedArrondissements.includes(e)?(selectedArrondissements.splice(selectedArrondissements.indexOf(e),1),d3.select(this).attr("isClicked","false").style("fill","#B0E0E6"),gArrondissement.selectAll(".bar").filter(function(t){let r=t.codePostal;return(r=1==r.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).style("fill","#808080"),gArrondissement.selectAll(".bar_bis").filter(function(t){let r=t.codePostal;return(r=1==r.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).style("fill","#808080")):(selectedArrondissements.push(e),d3.select(this).attr("isClicked","true").style("fill","#1E90FF"),gArrondissement.selectAll(".bar").filter(function(t){let r=t.codePostal;return(r=1==r.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).style("fill","#ffab00"),gArrondissement.selectAll(".bar_bis").filter(function(t){let r=t.codePostal;return(r=1==r.toString().length?"7500"+t.codePostal:"750"+t.codePostal)==e}).style("fill","#000000")),printList(),majBarLineChart(),indexHostpots()})}function initPieChart(){var t=d3.arc().outerRadius(radiusPie+15).innerRadius(radiusPie+15),e=d3.pie().value(function(t){return t.value})(d3.entries({0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1}));svgPie.append("text").attr("text-anchor","middle").attr("font-family","verdana").attr("font-size","20px").attr("transform","translate(0,175)").text("Heures sélectionnées"),svgPie.selectAll(".piePart").data(e).enter().append("path").attr("class","piePart").attr("d",[0,0]).attr("fill","blue").attr("stroke","black").style("stroke-width","2px").style("opacity",.7).on("click",function(t){let e=parseInt(t.data.key);selectedHours.includes(e)?(selectedHours.splice(selectedHours.indexOf(e),1),d3.select(this).style("fill","#808080"),svg.selectAll(".bar").filter(t=>t.hours==e).style("fill","#808080"),svgLineChart.selectAll(".dot").filter(t=>t.hours==e).style("fill","#808080"),svgLineChart.selectAll(".dot_bis").filter(t=>t.hours==e).style("fill","#808080")):(selectedHours.push(e),d3.select(this).style("fill","blue"),svg.selectAll(".bar").filter(t=>t.hours==e).style("fill","blue"),svgLineChart.selectAll(".dot").filter(t=>t.hours==e).style("fill","#ffab00"),svgLineChart.selectAll(".dot_bis").filter(t=>t.hours==e).style("fill","#000000")),printListHours(),indexHostpots(),majBarChartArr()}).transition().duration(1500).attr("d",d3.arc().innerRadius(0).outerRadius(radiusPie)),svgPie.selectAll(".textPie").data(e).enter().append("text").attr("class","textPie").attr("text-anchor","middle").attr("transform",function(e){return"translate("+t.centroid(e)+")"}).text(function(t){return t.data.key}).style("fill","#000000").style("font-size","15px")}function runAll(){d3.json("arrondissements.geojson").then(t=>{geoJson(t)}).then(()=>{indexHostpots()}).then(()=>{lineChart()}).then(()=>{barChartArrondissement(),barChart()}).then(()=>{printList(),printListHours()}).then(()=>{initPieChart()})}function reinitTabs(){for(i=0;i<24;i++)tabHours[i]={hours:i,frequency:0,download:0,upload:0};for(i=0;i<21;i++)tabCp[i]={codePostal:i,donnees:0,upload:0,download:0}}function runTest(t){var e=d3.timeParse("%Y-%m-%dT%H:%M:%S%Z");reinitTabs(),t.forEach(function(t,r){var a=e(t.DateDebut).getHours();tabHours[a].frequency+=1,tabHours[a].download+=parseInt(t.Download,10),tabHours[a].upload+=parseInt(t.Upload,10);var s=t.CodePostal;s="0"==s.substr(3,1)?s.substr(4,1):s.substr(3,2),tabCp[s].upload+=parseInt(t.Upload,10),tabCp[s].download+=parseInt(t.Download,10)}),tabCp=tabCp.slice(1)}function majBarChartArr(){runTest(completeData.filter(function(t,e){const r=d3.timeParse("%Y-%m-%dT%H:%M:%S%Z")(t.DateDebut).getHours();return selectedHours.includes(r)})),gArrondissement.selectAll(".bar").data(tabCp,function(t){return t.codePostal}).order().transition().duration(500).attr("y",t=>yArrondissement(t.download/1e9)).attr("height",t=>height-yArrondissement(t.download/1e9)),gArrondissement.selectAll(".bar_bis").data(tabCp,function(t){return t.codePostal}).order().transition().duration(500).attr("y",t=>yArrondissement((t.download+t.upload)/1e9)).attr("height",t=>height-yArrondissement(t.upload/1e9))}function majBarLineChart(){runTest(completeData.filter(function(t){return selectedArrondissements.includes(t.CodePostal.toString())})),svg.selectAll(".bar").data(tabHours,function(t){return t.hours}).order().transition().duration(500).attr("width",function(t){return x(t.frequency)}),svgLineChart.selectAll("path").filter(function(t){return"line"==d3.select(this).attr("class")}).datum(tabHours).attr("class","line").transition().duration(500).attr("d",line),svgLineChart.selectAll("path").filter(function(t){return"line_bis"==d3.select(this).attr("class")}).datum(tabHours).attr("class","line_bis").transition().duration(300).attr("d",line_bis),svgLineChart.selectAll(".dot").data(tabHours).transition().duration(500).attr("cx",function(t,e){return xScale(e)}).attr("cy",function(t){return yScale(t.download/1e9)}),svgLineChart.selectAll(".dot_bis").data(tabHours).transition().duration(500).attr("cx",function(t,e){return xScale(e)}).attr("cy",function(t){return yScale(t.upload/1e9)})}function resort(t){switch(t.value){case"1":svg.update((t,e)=>d3.ascending(t.hours,e.hours)),svgBarChartArrondissement.update((t,e)=>d3.ascending(t.codePostal,e.codePostal));break;case"2":svg.update((t,e)=>d3.descending(t.frequency,e.frequency)),svgBarChartArrondissement.update((t,e)=>d3.descending(t.download,e.download))}}function printList(){d3.select(".listPrintedArrondissements").text(function(){var t="";return selectedArrondissements.forEach((e,r)=>{5!=r&&10!=r&&15!=r||(t+="\n"),t+=e,r!=selectedArrondissements.length-1?t+=",":t+="."}),t})}function printListHours(){d3.select(".listPrintedHours").text(function(){var t="";return selectedHours.forEach((e,r)=>{10==r&&(t+="\n"),t+=e,r!=selectedHours.length-1?t+=",":t+="."}),t})}function index(t){"None"==t.value?(selectedArrondissements=[],svgMap.selectAll("path").transition().duration(500).style("fill","#B0E0E6"),gArrondissement.selectAll(".bar").transition().duration(500).style("fill","#808080"),gArrondissement.selectAll(".bar_bis").transition().duration(500).style("fill","#808080")):(selectedArrondissements=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020"],svgMap.selectAll("path").transition().duration(500).style("fill","#1E90FF"),gArrondissement.selectAll(".bar").transition().duration(500).style("fill","#ffab00"),gArrondissement.selectAll(".bar_bis").transition().duration(500).style("fill","#000000")),indexHostpots(),majBarLineChart(),printList()}function indexHours(t){"None2"==t.value?(selectedHours=[],svgLineChart.selectAll(".dot").transition().duration(500).style("fill","#808080"),svgLineChart.selectAll(".dot_bis").transition().duration(500).style("fill","#808080"),svg.selectAll(".bar").transition().duration(500).style("fill","#808080"),svgPie.selectAll(".piePart").transition().duration(500).style("fill","#808080")):(selectedHours=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],svgLineChart.selectAll(".dot").transition().duration(500).style("fill","#ffab00"),svgLineChart.selectAll(".dot_bis").transition().duration(500).style("fill","#000000"),svg.selectAll(".bar").transition().duration(500).style("fill","blue"),svgPie.selectAll(".piePart").transition().duration(500).style("fill","blue")),indexHostpots(),printListHours(),majBarChartArr()}d3.csv("dataParisHotspotsDemo.csv").then(function(t){completeData=t,runTest(t)}).then(()=>{runAll()});
